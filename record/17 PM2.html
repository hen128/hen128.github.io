<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PM2 | hen&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="...">
    <meta name="author" content="曾伟浩,hen">
    <meta name="keywords" content="曾伟浩,hen,个人博客,博客,blog,网站">
    
    <link rel="preload" href="/assets/css/0.styles.7f6c042d.css" as="style"><link rel="preload" href="/assets/js/app.efef9c9a.js" as="script"><link rel="preload" href="/assets/js/2.b2efb3ef.js" as="script"><link rel="preload" href="/assets/js/1.de8ffff8.js" as="script"><link rel="preload" href="/assets/js/62.174b96e5.js" as="script"><link rel="prefetch" href="/assets/js/10.28b286d6.js"><link rel="prefetch" href="/assets/js/11.dc295ccc.js"><link rel="prefetch" href="/assets/js/12.10fb064c.js"><link rel="prefetch" href="/assets/js/13.81fd08b2.js"><link rel="prefetch" href="/assets/js/14.6c35c0a3.js"><link rel="prefetch" href="/assets/js/15.2538697c.js"><link rel="prefetch" href="/assets/js/16.857777a4.js"><link rel="prefetch" href="/assets/js/17.0b6d69ae.js"><link rel="prefetch" href="/assets/js/18.63673293.js"><link rel="prefetch" href="/assets/js/19.4bd8aaf4.js"><link rel="prefetch" href="/assets/js/20.72078e67.js"><link rel="prefetch" href="/assets/js/21.a5c5573b.js"><link rel="prefetch" href="/assets/js/22.4b96829a.js"><link rel="prefetch" href="/assets/js/23.fcc746d9.js"><link rel="prefetch" href="/assets/js/24.20954a71.js"><link rel="prefetch" href="/assets/js/25.8de2a410.js"><link rel="prefetch" href="/assets/js/26.266b61a0.js"><link rel="prefetch" href="/assets/js/27.632f2eca.js"><link rel="prefetch" href="/assets/js/28.ff7282b5.js"><link rel="prefetch" href="/assets/js/29.60c98cad.js"><link rel="prefetch" href="/assets/js/3.6fa4f0c0.js"><link rel="prefetch" href="/assets/js/30.c1e063d7.js"><link rel="prefetch" href="/assets/js/31.df2f5fba.js"><link rel="prefetch" href="/assets/js/32.a0efffb4.js"><link rel="prefetch" href="/assets/js/33.7c960931.js"><link rel="prefetch" href="/assets/js/34.00faf88a.js"><link rel="prefetch" href="/assets/js/35.b9fc718a.js"><link rel="prefetch" href="/assets/js/36.e9d57178.js"><link rel="prefetch" href="/assets/js/37.32738102.js"><link rel="prefetch" href="/assets/js/38.77667ae4.js"><link rel="prefetch" href="/assets/js/39.6846c2d9.js"><link rel="prefetch" href="/assets/js/4.84c7b7ce.js"><link rel="prefetch" href="/assets/js/40.a39090ff.js"><link rel="prefetch" href="/assets/js/41.9b429bfd.js"><link rel="prefetch" href="/assets/js/42.e096fe90.js"><link rel="prefetch" href="/assets/js/43.17fa4dca.js"><link rel="prefetch" href="/assets/js/44.859e967b.js"><link rel="prefetch" href="/assets/js/45.bf9eba10.js"><link rel="prefetch" href="/assets/js/46.ae1523ae.js"><link rel="prefetch" href="/assets/js/47.21073d24.js"><link rel="prefetch" href="/assets/js/48.67190130.js"><link rel="prefetch" href="/assets/js/49.e1f01cf8.js"><link rel="prefetch" href="/assets/js/5.ffe4b674.js"><link rel="prefetch" href="/assets/js/50.b9315d4f.js"><link rel="prefetch" href="/assets/js/51.31e02fed.js"><link rel="prefetch" href="/assets/js/52.29922b92.js"><link rel="prefetch" href="/assets/js/53.a208ab74.js"><link rel="prefetch" href="/assets/js/54.c47fcc3a.js"><link rel="prefetch" href="/assets/js/55.445bd839.js"><link rel="prefetch" href="/assets/js/56.b399ee3f.js"><link rel="prefetch" href="/assets/js/57.d7686465.js"><link rel="prefetch" href="/assets/js/58.95ecf112.js"><link rel="prefetch" href="/assets/js/59.d437c26f.js"><link rel="prefetch" href="/assets/js/6.59b9aba5.js"><link rel="prefetch" href="/assets/js/60.35da1020.js"><link rel="prefetch" href="/assets/js/61.aac87dd4.js"><link rel="prefetch" href="/assets/js/63.0f1d08ca.js"><link rel="prefetch" href="/assets/js/64.97955427.js"><link rel="prefetch" href="/assets/js/65.55a8ae0d.js"><link rel="prefetch" href="/assets/js/66.9a8a3735.js"><link rel="prefetch" href="/assets/js/7.ae7f4f36.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.bb5cb49d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f6c042d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">hen's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/01 Vue.html" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/demo/1 基于uni-app的小红书系统.html" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/record/01 Flex布局复习.html" class="nav-link">
  记录
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://gitee.com/hen128" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/01 Vue.html" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/demo/1 基于uni-app的小红书系统.html" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/record/01 Flex布局复习.html" class="nav-link">
  记录
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://gitee.com/hen128" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Record</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/record/01 Flex布局复习.html" class="sidebar-link">Flex布局复习-骰子</a></li><li><a href="/record/02 在线预览Office微软接口.html" class="sidebar-link">在线预览Office 微软接口</a></li><li><a href="/record/03 Typora设置图床.html" class="sidebar-link">Typora设置图床</a></li><li><a href="/record/04 git提交规范.html" class="sidebar-link">git提交规范</a></li><li><a href="/record/05 Linux.html" class="sidebar-link">Linux</a></li><li><a href="/record/07 Vue CLI.html" class="sidebar-link">Vue CLI</a></li><li><a href="/record/08 VSCode.html" class="sidebar-link">VsCode</a></li><li><a href="/record/09 Vite.html" class="sidebar-link">Vite</a></li><li><a href="/record/09 Vscode运行Python.html" class="sidebar-link">VS Code运行Python</a></li><li><a href="/record/10 VuePress.html" class="sidebar-link">VuePress</a></li><li><a href="/record/10 申请免费数据库.html" class="sidebar-link">申请免费数据库</a></li><li><a href="/record/11 Windi CSS.html" class="sidebar-link">WindiCSS</a></li><li><a href="/record/12 Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/record/15 NVM.html" class="sidebar-link">nvm</a></li><li><a href="/record/16 开发小笔记.html" class="sidebar-link">开发小笔记</a></li><li><a href="/record/17 PM2.html" class="active sidebar-link">PM2</a></li><li><a href="/record/18 Mac配置.html" class="sidebar-link">Mac配置</a></li><li><a href="/record/19 开发技巧汇总.html" class="sidebar-link">开发小笔记</a></li><li><a href="/record/20 摘抄.html" class="sidebar-link">/record/20 摘抄.html</a></li><li><a href="/record/21 node读写Excel.html" class="sidebar-link">node读取Excel</a></li><li><a href="/record/22 js调用qq邮箱.html" class="sidebar-link">/record/22 js调用qq邮箱.html</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pm2"><a href="#pm2" class="header-anchor">#</a> PM2</h1> <p><img src="https://cloud.zengweihao.cn/typora/2023-02-07/20230207092045.png" alt="image-20230207092044016"></p> <blockquote><p>pm2是一个进程管理工具,可以用它来管理你的node进程，并查看node进程的状态，当然也支持性能监控，进程守护，负载均衡等功能</p></blockquote> <p>安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i pm2 <span class="token parameter variable">-g</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>常用命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pm2 start app.js or
pm2 start config.json 启动应用程序

pm2 list 列表所有应用程序

pm2 logs
pm2 logs xxx 查看日志

pm2 stop xxx
pm2 stop all 停止

pm2 restart xxx 重启

pm2 reload all 热加载允许在不停机的情况下更新应用程序

pm2 delete xxx 关闭并删除
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>配置<code>创建xxx.json</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;apps&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wuwu&quot;</span><span class="token punctuation">,</span>                             <span class="token comment">// 项目名          </span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/www&quot;</span><span class="token punctuation">,</span>                      <span class="token comment">// 执行文件</span>
        <span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>                                <span class="token comment">// 根目录</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>                                 <span class="token comment">// 传递给脚本的参数</span>
        <span class="token property">&quot;interpreter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>                          <span class="token comment">// 指定的脚本解释器</span>
        <span class="token property">&quot;interpreter_args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>                     <span class="token comment">// 传递给解释器的参数</span>
        <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                              <span class="token comment">// 是否监听文件变动然后重启</span>
        <span class="token property">&quot;ignore_watch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>                           <span class="token comment">// 不用监听的文件</span>
            <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;logs&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;exec_mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cluster_mode&quot;</span><span class="token punctuation">,</span>                <span class="token comment">// 应用启动模式，支持fork和cluster模式</span>
        <span class="token property">&quot;instances&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>                             <span class="token comment">// 应用启动实例个数，仅在cluster模式有效 默认为fork；或者 max</span>
        <span class="token property">&quot;max_memory_restart&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>                    <span class="token comment">// 最大内存限制数，超出自动重启</span>
        <span class="token property">&quot;error_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./logs/app-err.log&quot;</span><span class="token punctuation">,</span>         <span class="token comment">// 错误日志文件</span>
        <span class="token property">&quot;out_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./logs/app-out.log&quot;</span><span class="token punctuation">,</span>           <span class="token comment">// 正常日志文件</span>
        <span class="token property">&quot;merge_logs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                         <span class="token comment">// 设置追加日志而不是新建日志</span>
        <span class="token property">&quot;log_date_format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span><span class="token punctuation">,</span>   <span class="token comment">// 指定日志文件的时间格式</span>
        <span class="token property">&quot;min_uptime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;60s&quot;</span><span class="token punctuation">,</span>                        <span class="token comment">// 应用运行少于时间被认为是异常启动</span>
        <span class="token property">&quot;max_restarts&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>                         <span class="token comment">// 最大异常重启次数，即小于min_uptime运行时间重启次数；</span>
        <span class="token property">&quot;autorestart&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                        <span class="token comment">// 默认为true, 发生异常的情况下自动重启</span>
        <span class="token property">&quot;cron_restart&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>                         <span class="token comment">// crontab时间格式重启应用，目前只支持cluster模式;</span>
        <span class="token property">&quot;restart_delay&quot;</span><span class="token operator">:</span> <span class="token string">&quot;60s&quot;</span>                      <span class="token comment">// 异常重启情况下，延时重启时间</span>
        <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
           <span class="token property">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>                <span class="token comment">// 环境参数，当前指定为生产环境 process.env.NODE_ENV</span>
           <span class="token property">&quot;REMOTE_ADDR&quot;</span><span class="token operator">:</span> <span class="token string">&quot;爱上大声地&quot;</span>               <span class="token comment">// process.env.REMOTE_ADDR</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;env_dev&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>              <span class="token comment">// 环境参数，当前指定为开发环境 pm2 start app.js --env_dev</span>
            <span class="token property">&quot;REMOTE_ADDR&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;env_test&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>                               <span class="token comment">// 环境参数，当前指定为测试环境 pm2 start app.js --env_test</span>
            <span class="token property">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;REMOTE_ADDR&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2 years</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/record/16 开发小笔记.html" class="prev">
        开发小笔记
      </a></span> <span class="next"><a href="/record/18 Mac配置.html">
        Mac配置
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.efef9c9a.js" defer></script><script src="/assets/js/2.b2efb3ef.js" defer></script><script src="/assets/js/1.de8ffff8.js" defer></script><script src="/assets/js/62.174b96e5.js" defer></script>
  </body>
</html>
